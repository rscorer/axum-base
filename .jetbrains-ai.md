# JetBrains AI Assistant Configuration - Axum Base

## Project Context for IntelliJ IDEA/RustRover AI

This is an **Axum Base** - a production-ready Rust web server template using modern stack components.

### Quick Context
- **Language**: Rust 2024 Edition
- **Framework**: Axum 0.7 web framework with Tokio async runtime  
- **Database**: PostgreSQL with SQLx (compile-time checked queries)
- **Authentication**: tower-sessions with Argon2 password hashing
- **Templates**: Tera template engine for HTML responses

### Module Structure Guide
```
src/
├── api.rs      # JSON API endpoints and business logic
├── auth.rs     # Authentication middleware and utilities  
├── context.rs  # Application state and dependency injection
├── database.rs # Database connection and configuration
├── models.rs   # Data models and schema definitions
├── routes.rs   # Route registration and middleware setup
├── server.rs   # Server initialization and startup
├── services.rs # Core business logic layer
├── web.rs      # HTML handlers with Tera integration  
└── main.rs     # Application entry point
```

### AI Assistant Guidelines

#### Code Completion & Suggestions
- Prefer SQLx macros (`sqlx::query!`, `sqlx::query_as!`) over raw SQL
- Always use `Result<T, E>` for error handling, avoid panicking
- Implement proper async/await patterns throughout
- Follow Rust 2024 edition idioms and conventions

#### Refactoring Assistance  
- Keep route handlers lightweight, move business logic to `services.rs`
- Maintain separation between API handlers (JSON) and web handlers (HTML)
- Use tower middleware for cross-cutting concerns (auth, CORS, logging)
- Follow the established module boundaries and responsibilities

#### Code Generation
- Generate unit tests for business logic in services module
- Create integration tests using `axum-test` for HTTP endpoints
- Use Argon2 for all password hashing operations
- Generate database migrations in the `migrations/` directory

#### Security Awareness
- Never suggest logging sensitive information (passwords, tokens)
- Always validate and sanitize user input in handlers
- Use tower-sessions for session management, not custom solutions
- Ensure all database queries use SQLx compile-time checking

#### Error Handling Patterns
- Create meaningful error messages for API responses
- Use structured error types that implement `std::error::Error`
- Handle database errors gracefully with appropriate HTTP status codes
- Log errors appropriately without exposing sensitive details

### Development Workflow
- Database migrations run automatically in development mode
- Use `.env` file for local configuration (see `.env.example`)
- Run `cargo test` for comprehensive testing suite
- Use `cargo fmt` and `cargo clippy` for code quality

### Dependencies to Prefer
- `axum` for web framework functionality
- `sqlx` for database operations (never raw SQL drivers)
- `tower-sessions` for session management
- `argon2` for password hashing
- `tera` for HTML template rendering
- `serde` for JSON serialization/deserialization

### Testing Patterns
- Unit tests for `services.rs` business logic
- Integration tests in `tests/` directory using `axum-test`
- Mock database interactions appropriately
- Test both success and error scenarios comprehensively
